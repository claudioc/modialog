/*
* jQuery Modialog plugin 1.0
*
* Copyright (c) 2011 Claudio Cicali <claudio.cicali@gmail.com
*
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
*/
(function(b){function d(a,l){if(b.isFunction(c[a]))return c[a].apply(l);return null}function e(a){c.closeWithEsc&&b(window).unbind("keypress.modialog");b(window).unbind("resize.modialog");f.hide();a.hide();d("onClose",a)}function i(a){f.hide().css({width:b(window).width(),height:b(window).height()}).show();a.css({"z-index":"1001",position:"absolute",top:0|b(document).scrollTop()+(b(window).height()-a.height())/2+c.offsetTop,left:0|(b(window).width()-a.width())/2+c.offsetLeft})}var f,c={closeWithEsc:!1, icon:"X",offsetTop:0,offsetLeft:0},g,j,k=!1,h={init:function(a){g=b('<div class="modialog-caption"/>');j=b('<div class="modialog-icon">'+c.icon+"</div>");a=a||{};b.extend(c,a);f=b("<div/>").css({display:"none",position:"fixed",top:0,left:0,opacity:0.6,"z-index":"1000"}).addClass("modialog-overlay").appendTo("body").click(function(a){a.stopPropagation();a.preventDefault();return!1})},open:function(){var a=this;if(!this.is(":visible"))return c.closeWithEsc&&b(window).bind("keypress.modialog",function(b){27== b.keyCode&&!1!==d("onBeforeClose")&&e(a)}),b(window).bind("resize.modialog",function(){i(a)}),k||(g.prependTo(this),j.appendTo(g).click(function(){!1!==d("onBeforeClose")&&e(a)}),k=!0),i(a),this.show(),d("onOpen",this),this},close:function(){this.is(":visible")&&e(this);return this}};b.fn.modialog=function(a){if(h[a])return h[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return h.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.modialog")}})(jQuery);
