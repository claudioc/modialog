/*
* jQuery Modialog plugin 1.2.2
*
* Copyright (c) 2011 Claudio Cicali <claudio.cicali@gmail.com
*
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
*/
(function(b){function i(a,c){var d=c.data("modialogOptions");return b.isFunction(d[a])?d[a].apply(c):null}function f(a,c,d){if(!a&&!e)return this;if(!a&&e&&!e.data("modialogOptions").closeWithClick)return this;var a=a?a:e,l=a.data("modialogOptions");if(!c&&l.locked)return this;l.closeWithEsc&&b(window).unbind("keypress.modialog");b(window).unbind("resize.modialog");h.hide();a.hide();a.html(a.data("modialogContent"));e=null;i("onClose",a);d&&d.apply(a);return this}function j(a){var c=a.data("modialogOptions");
h.hide().css({width:b(window).width(),height:b(window).height()}).show();var d=0|b(document).scrollTop()+(b(window).height()-a.height())/2+c.offsetTop;a.css({"z-index":"1001",position:"absolute",top:d<0?0:d,left:0|(b(window).width()-a.width())/2+c.offsetLeft})}var h=null,n={closeWithEsc:!1,closeWithClick:!1,locked:!1,icon:"X",title:"",offsetTop:0,offsetLeft:0},g,m,e=null,k={init:function(a){var a=a||{},c={};b.extend(c,n);b.extend(c,a);this.data("modialogOptions",c);this.data("modialogContent",this.html());
h||(h=b("<div/>").css({display:"none",position:"fixed",top:0,left:0,opacity:0.6,"z-index":"1000"}).addClass("modialog-overlay").appendTo("body").click(function(a){a.stopPropagation();a.preventDefault();f();return!1}),this.appendTo("body"));return this},set:function(a){var c=this.data("modialogOptions");for(key in a)c[key]=a[key];this.data("modialogOptions",c);return this},center:function(){if(this.is(":visible"))return j(this),this},lock:function(){var a=this.data("modialogOptions");a.locked=!0;this.data("modialogOptions",
a);return this},unlock:function(){var a=this.data("modialogOptions");a.locked=!1;this.data("modialogOptions",a);return this},load:function(a,c,d){var b=this;b.find(a).load(c,function(){b.modialog("open");b.modialog("center");b.find(".modialog-close").click(function(a){a.stopPropagation();a.preventDefault();b.modialog("close");return!1});d&&d.apply(b)});return this},open:function(a){var c=this,d=this.data("modialogOptions");if(this.is(":visible"))return this;e&&f(e);e=c;d.closeWithEsc&&b(window).bind("keypress.modialog",
function(a){27==a.keyCode&&!1!==i("onBeforeClose",c)&&f(c)});b(window).bind("resize.modialog",function(){j(c)});if(d.title!=""||d.icon!="")g=b('<div class="modialog-caption"/>'),d.title!=""&&g.html(d.title),g.prependTo(this);!d.locked&&d.icon!=""&&g&&(m=b('<div class="modialog-icon">'+d.icon+"</div>"),m.appendTo(g).click(function(){!1!==i("onBeforeClose",c)&&f(c)}));j(c);this.show();a&&a.apply(c);return this},close:function(){this.is(":visible")&&f(this,!0);return this}};b.fn.modialog=function(a){if(b.isFunction(k[a]))return k[a].apply(this,
Array.prototype.slice.call(arguments,1));else if(b.isPlainObject(a)||typeof a=="undefined")return k.init.apply(this,arguments);else b.error("Method "+a+" does not exist on jQuery.modialog")}})(jQuery);